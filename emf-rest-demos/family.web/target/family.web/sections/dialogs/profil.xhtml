<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      	xmlns:pe="http://primefaces.org/ui/extensions">
    <ui:composition>
    <p:growl id="msgs3" showDetail="false" />
    <script type="text/javascript">
            function onEditMotDePasseComplete(xhr, status, args) {
                if(args.validationFailed) {
					$(PrimeFaces.escapeClientId('dialogForm:motDePasseDlg')).effect("shake", { times:1 }, 100);
				} else {
					motDePasseDialog.hide();
				}
            }
            </script>

			<script type="text/javascript">
            function onEditEmailComplete(xhr, status, args) {
                if(args.validationFailed) {
					$(PrimeFaces.escapeClientId('dialogForm:emailDlg')).effect("shake", { times:1 }, 100);
				} else {
					emailDialog.hide();
				}
            }
            </script>
            <p:dialog header="#{msgs.modifierMotDePasse}"
					widgetVar="motDePasseDialog" showEffect="fade" hideEffect="fade"
					modal="true" id="editMotDePasseDlg" closable="false">

					<h:panelGrid id="editMotDePasse" columns="2" cellpadding="5">



						<h:outputText value="#{msgs.actuelMotDePasse}" />
					
						<p:password id="pw" value="#{passwordBean.actuel}" feedback="false" 
							required="true" validator="password" maxlength="20" requiredMessage="#{msgs.actualPasswordRequired}" >
							</p:password>
						<h:outputLabel for="pwd1" value="#{msgs.nouveauMotDePasse}" />
						<p:password id="pwd1" value="#{passwordBean.password}" 
							feedback="false"   required="true" maxlength="20" requiredMessage="#{msgs.newPasswordRequired}" validatorMessage="#{msgs.validatorLengthPassword}">
							<f:validateLength minimum="8" maximum="20"/>
						</p:password>
						<h:outputLabel for="pwd2" value="#{msgs.retapezNouveauMotDePasse}" />
						<p:password id="pwd2" value="#{passwordBean.password}" match="pwd1" 
							feedback="false"  required="true" maxlength="20" requiredMessage="#{msgs.new2PasswordRequired}" validatorMessage="#{msgs.validatorLengthPassword}">
<f:validateLength minimum="8" maximum="20"/>
						</p:password>



						<f:facet name="footer">

							<p:outputPanel layout="block" style="text-align:right">
								<p:commandButton value="#{msgs.ok}"
									update="msgs3 editMotDePasse"
									actionListener="#{passwordBean.store}"
									oncomplete="onEditMotDePasseComplete(xhr,status,args)"
									icon="ui-icon ui-icon-check" process="editMotDePasse" />


								<p:commandButton value="#{msgs.annuler}"
									oncomplete="motDePasseDialog.hide()" immediate="true" update="editMotDePasse"
									icon="ui-icon ui-icon-close" action="#{passwordBean.cancelEdit}">
										<pe:resetInput for="editMotDePasse" />
									</p:commandButton>
							</p:outputPanel>

						</f:facet>

					</h:panelGrid>
				</p:dialog>

				<p:dialog header="#{msgs.modifierEmail}" widgetVar="emailDialog"
					showEffect="fade" hideEffect="fade" modal="true" id="editEmailDlg" closable="false">

					<h:panelGrid id="editEmail" columns="2" cellpadding="5">
<h:outputText value="#{msgs.actuelMotDePasse}" />
						<p:password value="#{passwordBean.actuel}" feedback="false"
							required="true" validator="password" requiredMessage="#{msgs.actualPasswordRequired}" />
						<h:outputLabel for="mail1" value="Nouveau email :" />
						<p:inputText id="mail1" value="#{passwordBean.email1}"
							required="true" validator="uniqueLoginModif" requiredMessage="#{msgs.requiredEmail}" >
						</p:inputText>




						
						<f:facet name="footer">

							<p:outputPanel layout="block" style="text-align:right">
								<p:commandButton value="#{msgs.ok}"
									update="msgs3 editEmail :mainForm:display1"
									actionListener="#{passwordBean.modifEmail}"
									oncomplete="onEditEmailComplete(xhr,status,args)"
									icon="ui-icon ui-icon-check" process="editEmail" />


								<p:commandButton value="#{msgs.annuler}"
									oncomplete="emailDialog.hide()" immediate="true" update="editEmail"
									icon="ui-icon ui-icon-close" action="#{passwordBean.cancelEditEmail}">
										<pe:resetInput for="editEmail" />
									</p:commandButton>
							</p:outputPanel>

						</f:facet>

					</h:panelGrid>
				</p:dialog>
    </ui:composition>
</html>     